<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>PandaCare - Chat List</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<style>
			body {
				background-color: #f8f9fa;
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			}
			.chat-card {
				transition: transform 0.3s;
				margin-bottom: 15px;
				border-radius: 10px;
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}
			.chat-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
			}
			.card-header {
				background-color: #7e57c2;
				color: white;
				border-top-left-radius: 10px !important;
				border-top-right-radius: 10px !important;
			}
			.navbar-brand {
				font-weight: bold;
				color: #7e57c2 !important;
			}
			.btn-primary {
				background-color: #7e57c2;
				border-color: #7e57c2;
			}
			.btn-primary:hover {
				background-color: #6a48b7;
				border-color: #6a48b7;
			}
			.empty-state {
				text-align: center;
				padding: 50px 0;
			}
			.empty-state svg {
				width: 100px;
				margin-bottom: 20px;
				color: #7e57c2;
			}
		</style>
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
			<div class="container">
				<a
					class="navbar-brand"
					href="#"
					>PandaCare</a
				>
				<button
					class="navbar-toggler"
					type="button"
					data-bs-toggle="collapse"
					data-bs-target="#navbarNav"
				>
					<span class="navbar-toggler-icon"></span>
				</button>
				<div
					class="collapse navbar-collapse"
					id="navbarNav"
				>
					<ul class="navbar-nav ms-auto">
						<li class="nav-item">
							<a
								class="nav-link"
								href="#"
								>Dashboard</a
							>
						</li>
						<li class="nav-item">
							<a
								class="nav-link active"
								href="#"
								>Messages</a
							>
						</li>
						<li class="nav-item">
							<a
								class="nav-link"
								href="#"
								>Profile</a
							>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<div class="container py-5">
			<div class="row mb-4">
				<div class="col">
					<h2 class="mb-1">Your Conversations</h2>
					<p
						class="text-muted"
						th:text="${userType == 'PACILIAN' ? 'Chat with your caregivers' : 'Chat with your patients'}"
					></p>
				</div>
			</div>

			<div
				class="row"
				th:if="${not #lists.isEmpty(chatRooms)}"
			>
				<div
					class="col-md-4"
					th:each="room : ${chatRooms}"
				>
					<div class="card chat-card">
						<div class="card-header">
							<h5
								class="card-title mb-0"
								th:text="${userType == 'PACILIAN' ? 'Caregiver ID: ' + room.caregiverId : 'Patient ID: ' + room.pacilianId}"
							></h5>
						</div>
						<div class="card-body">
							<p class="card-text">
								Room ID: <span th:text="${room.roomId}"></span>
							</p>
							<p class="card-text">
								Message count:
								<span
									th:text="${room.messages != null ? room.messages.size() : 0}"
								></span>
							</p>
							<a
								th:href="@{/chat/room(pacilianId=${room.pacilianId},caregiverId=${room.caregiverId})}"
								class="btn btn-primary w-100"
								>Open Chat</a
							>
						</div>
					</div>
				</div>
			</div>

			<div
				class="row"
				th:if="${#lists.isEmpty(chatRooms)}"
			>
				<div class="col">
					<div class="empty-state">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							width="16"
							height="16"
							fill="currentColor"
							class="bi bi-chat-square-text"
							viewBox="0 0 16 16"
						>
							<path
								d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"
							/>
							<path
								d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6m0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"
							/>
						</svg>
						<h4>No conversations yet</h4>
						<p class="text-muted">
							You don't have any active chats. Start a new conversation!
						</p>
					</div>
				</div>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
